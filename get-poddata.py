#!/usr/bin/python

from kubernetes import client, config
from openshift.dynamic import DynamicClient

import json

k8s_client = config.new_client_from_config()
dyn_client = DynamicClient(k8s_client)

v1_pods = dyn_client.resources.get(api_version='v1', kind='Pod')
pod_list = v1_pods.get()
for pod in pod_list.items:
  print("ns: %s\n  pod: %s" % (pod.metadata.namespace, pod.metadata.name))
  for containerstatus in pod.status.containerStatuses:
    print("    container: %s" % (containerstatus.name))
    print("      state: %s" % (containerstatus.state))
    print("      image: %s" % (containerstatus.image))
    print("      imageID: %s" % (containerstatus.imageID))
  break
