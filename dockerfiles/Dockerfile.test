FROM registry.access.redhat.com/ubi8/ubi

RUN yum install -y glibc-langpack-en

ENV LC_ALL=en_US.utf8
ENV LANG=en_US.utf8

RUN yum install -y python36 python3-pip python3-setuptools && \
    yum install -y vim-enhanced && \
    yum clean all

RUN pip3 install 'openshift==0.10.0' && \
    pip3 install 'prometheus_client==0.7.1' && \
    pip3 install 'tox==3.14.0'

COPY cv-exporter.py /exporter/
COPY LICENSE /exporter/

COPY . /package

WORKDIR /package

CMD [ "tox" ]
